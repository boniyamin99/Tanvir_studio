<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tanvir Studio - Professional Nasheed Composition</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        /* ============================================
        FUTURISTIC THEME & CUSTOM STYLES
        ============================================
        */
        :root {
            --accent-color-light: #2563EB; /* A stronger blue for light mode */
            --accent-color-dark: #38BDF8;  /* A vibrant sky blue for dark mode */
        }
        
        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Inter', sans-serif;
            transition: background-color 0.5s, color 0.5s;
        }

        /* -----------------
        LIGHT THEME (DEFAULT)
        -----------------
        */
        html:not(.dark) {
            --bg-primary: #F0F4F8;      /* A very light, cool gray */
            --bg-secondary: #FFFFFF;     /* Pure white for cards */
            --text-primary: #0F172A;     /* A deep, dark blue for text */
            --text-secondary: #64748B;   /* A muted slate gray */
            --border-color: #E2E8F0;     /* A light, subtle border */
            --accent-color: var(--accent-color-light);
        }

        /* -----------------
        DARK THEME (FUTURISTIC BLUE)
        -----------------
        */
        .dark {
            --bg-primary: #0B1120;      /* Deep, dark navy blue */
            --bg-secondary: #1E293B;     /* Slate blue for cards and secondary elements */
            --text-primary: #E2E8F0;     /* Soft, off-white for readability */
            --text-secondary: #94A3B8;   /* Lighter blue-gray for secondary text */
            --border-color: #334155;     /* Muted border color */
            --accent-color: var(--accent-color-dark);
        }

        /* General Styles using CSS Variables */
        body { background-color: var(--bg-primary); color: var(--text-primary); }
        .bg-secondary { background-color: var(--bg-secondary); }
        .text-secondary { color: var(--text-secondary); }
        .border-color { border-color: var(--border-color); }
        .accent-bg { background-color: var(--accent-color); }
        .accent-text { color: var(--accent-color); }
        .accent-border { border-color: var(--accent-color); }
        
        .section-title { font-size: 2.5rem; font-weight: 800; margin-bottom: 1rem; }
        .section-subtitle { font-size: 1.125rem; color: var(--text-secondary); max-width: 800px; margin: 0 auto 3rem auto; }
        
        .card {
            background-color: var(--bg-secondary); border: 1px solid var(--border-color);
            border-radius: 1.25rem; padding: 2rem; transition: transform 0.3s, box-shadow 0.3s;
        }
        .card:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 30px -10px rgba(0,0,0,0.1);
        }
        .dark .card:hover {
             box-shadow: 0 10px 25px -5px rgba(56, 189, 248, 0.1), 0 8px 10px -6px rgba(56, 189, 248, 0.1);
        }
        
        .btn {
            display: inline-block; padding: 0.85rem 1.75rem; border-radius: 0.75rem;
            font-weight: 600; text-align: center; transition: all 0.3s;
            border: 2px solid transparent;
        }
        .btn-primary {
            background-image: linear-gradient(to right, var(--accent-color) 0%, #3b82f6 51%, var(--accent-color) 100%);
            background-size: 200% auto;
            color: white; border: none;
        }
        .btn-primary:hover { background-position: right center; transform: scale(1.05); }
        .btn-primary:disabled { opacity: 0.7; cursor: not-allowed; }
        .btn-secondary { border-color: var(--accent-color); color: var(--accent-color); }
        .btn-secondary:hover { background-color: var(--accent-color); color: white; }

        header {
            background-color: rgba(240, 244, 248, 0.7);
            backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px);
        }
        .dark header { background-color: rgba(11, 17, 32, 0.7); }

        details {
            background-color: var(--bg-secondary); border-radius: 0.75rem;
            border: 1px solid var(--border-color); margin-bottom: 1rem; transition: background-color 0.3s;
        }
        details[open] { background-color: var(--bg-primary); }
        summary {
            padding: 1.5rem; font-weight: 600; cursor: pointer;
            display: flex; justify-content: space-between; align-items: center;
        }
        summary::-webkit-details-marker { display: none; }
        details[open] summary { border-bottom: 1px solid var(--border-color); color: var(--accent-color); }
        .faq-content { padding: 1.5rem; color: var(--text-secondary); }
        summary::after {
            content: '\f078'; font-family: 'Font Awesome 6 Free'; font-weight: 900;
            transition: transform 0.3s ease-in-out;
        }
        details[open] summary::after { transform: rotate(180deg); }
        
        #mobile-menu { display: none; }
        @media (max-width: 1024px) { #desktop-menu { display: none; } #mobile-menu-button { display: block; } }
        @media (min-width: 1025px) { #mobile-menu-button { display: none; } }
        .client-card { background-color: var(--bg-secondary); border-radius: 1rem; padding: 1.5rem; text-align: center; border: 1px solid var(--border-color); }

        /* Modal, Calendar, and Step styles */
        #bookingModal { transition: opacity 0.3s ease-in-out; }
        .modal-content { max-height: 90vh; }
        .calendar-day { text-align: center; padding: 0.75rem 0.5rem; border-radius: 50%; cursor: pointer; transition: background-color 0.2s; }
        .calendar-day:hover:not(.disabled), .calendar-day.selected { background-color: var(--accent-color); color: white; }
        .calendar-day.disabled { color: var(--text-secondary); cursor: not-allowed; opacity: 0.5; }
        .calendar-day.today { border: 1px solid var(--accent-color); }
        .time-slot { cursor: pointer; border: 1px solid var(--border-color); transition: background-color 0.2s, color 0.2s; }
        .time-slot.selected, .time-slot:hover:not(.disabled) { background-color: var(--accent-color); color: white; border-color: var(--accent-color); }
        .time-slot.disabled { background-color: var(--border-color); color: var(--text-secondary); cursor: not-allowed; opacity: 0.6; }
        .step { display: flex; flex-direction: column; align-items: center; position: relative; }
        .step-circle { width: 2.5rem; height: 2.5rem; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; border: 2px solid var(--border-color); background-color: var(--bg-secondary); color: var(--text-secondary); transition: all 0.3s; }
        .step.active .step-circle { background-color: var(--accent-color); border-color: var(--accent-color); color: white; }
        .step-label { margin-top: 0.5rem; font-size: 0.875rem; color: var(--text-secondary); transition: all 0.3s; }
        .step.active .step-label { color: var(--text-primary); font-weight: 600; }
        .step-connector { flex-grow: 1; height: 2px; background-color: var(--border-color); margin: 0 1rem; margin-top: -2.2rem; max-width: 5rem; }
        .step-content { display: none; }
        .step-content.active { display: block; animation: fadeIn 0.5s; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        /* AI Lyrics Generator Styles */
        .lyrics-input {
            width: 100%; background-color: var(--bg-primary); border: 1px solid var(--border-color); 
            border-radius: 0.75rem; padding: 0.85rem 1rem; color: var(--text-primary);
        }
        .lyrics-input:focus {
            outline: none; border-color: var(--accent-color); box-shadow: 0 0 0 2px rgba(var(--accent-color), 0.5);
        }
        #lyricsResultContainer {
            background-color: var(--bg-primary); border: 1px dashed var(--border-color);
            border-radius: 0.75rem; padding: 1.5rem; white-space: pre-wrap;
            min-height: 150px; position: relative; transition: border-color 0.3s;
            display: flex; align-items: center; justify-content: center;
        }
        .copy-btn {
            position: absolute; top: 1rem; right: 1rem;
            background-color: var(--bg-secondary); border: 1px solid var(--border-color);
            padding: 0.5rem 0.75rem; border-radius: 0.5rem; cursor: pointer;
            transition: all 0.2s; z-index: 10;
        }
        .copy-btn:hover { background-color: var(--accent-color); color: white; border-color: var(--accent-color); }
        
        @keyframes pulse-border {
            0%, 100% { border-color: var(--accent-color); }
            50% { border-color: var(--border-color); }
        }
        #lyricsResultContainer.generating {
            animation: pulse-border 2s infinite;
        }

    </style>
</head>
<body class="bg-primary text-primary">

    <header class="sticky top-0 z-40 border-b border-color">
        <nav class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <a href="#" class="text-2xl font-bold accent-text">Tanvir Studio</a>
                
                <div id="desktop-menu" class="hidden lg:flex items-center space-x-6">
                    <a href="#home" class="text-secondary hover:accent-text transition">Home</a>
                    <a href="#services" class="text-secondary hover:accent-text transition">Services</a>
                    <a href="#samples" class="text-secondary hover:accent-text transition">Samples</a>
                    <a href="#clients" class="text-secondary hover:accent-text transition">Clients</a>
                    <a href="#lyrics-generator" class="text-secondary hover:accent-text transition">AI Lyrics</a>
                    <a href="#faq" class="text-secondary hover:accent-text transition">FAQ</a>
                    <a href="#blog" class="text-secondary hover:accent-text transition">Blog</a>
                    <a href="#contact" class="text-secondary hover:accent-text transition">Contact</a>
                </div>

                <div class="flex items-center space-x-4">
                    <button id="theme-toggle" class="p-2 rounded-full text-secondary hover:accent-text transition">
                        <i id="theme-icon" class="fas fa-moon text-xl"></i>
                    </button>
                    <button id="mobile-menu-button" class="lg:hidden p-2 rounded-md text-secondary hover:accent-text transition">
                        <i class="fas fa-bars text-xl"></i>
                    </button>
                </div>
            </div>
            <div id="mobile-menu" class="lg:hidden mt-4 space-y-2">
                 <a href="#home" class="block py-2 px-4 text-sm rounded-md hover:bg-gray-500/10 transition">Home</a>
                <a href="#services" class="block py-2 px-4 text-sm rounded-md hover:bg-gray-500/10 transition">Services</a>
                <a href="#samples" class="block py-2 px-4 text-sm rounded-md hover:bg-gray-500/10 transition">Samples</a>
                <a href="#clients" class="block py-2 px-4 text-sm rounded-md hover:bg-gray-500/10 transition">Clients</a>
                <a href="#lyrics-generator" class="block py-2 px-4 text-sm rounded-md hover:bg-gray-500/10 transition">AI Lyrics</a>
                <a href="#faq" class="block py-2 px-4 text-sm rounded-md hover:bg-gray-500/10 transition">FAQ</a>
                <a href="#blog" class="block py-2 px-4 text-sm rounded-md hover:bg-gray-500/10 transition">Blog</a>
                <a href="#contact" class="block py-2 px-4 text-sm rounded-md hover:bg-gray-500/10 transition">Contact</a>
            </div>
        </nav>
    </header>

    <main class="container mx-auto px-6 py-12">
        <section id="home" class="my-16 md:my-24">
            <div class="grid md:grid-cols-2 gap-12 items-center">
                <div class="order-2 md:order-1">
                    <img src="https://placehold.co/600x400/0F172A/38BDF8?text=Tanvir+Studio" alt="Tanvir Studio Interior" class="rounded-2xl shadow-lg w-full h-auto object-cover">
                </div>
                <div class="order-1 md:order-2 text-center md:text-left">
                    <h1 class="text-4xl md:text-6xl font-extrabold leading-tight mb-6">
                        Crafting Soulful <span class="accent-text">Nasheeds</span> for the Modern Age.
                    </h1>
                    <p class="text-lg text-secondary mb-8">
                        We merge professional production with spiritual artistry to create Nasheeds that resonate deeply and inspire globally.
                    </p>
                    <a href="#services" class="btn btn-primary text-lg">Explore Packages</a>
                </div>
            </div>
        </section>

        <section id="services" class="my-24 text-center">
            <h2 class="section-title">Nasheed Composition Packages</h2>
            <p class="section-subtitle">Choose the perfect package to bring your vision to life. From simple and soulful to a full cinematic production, we have you covered.</p>
            <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
                 <div class="card flex flex-col">
                    <h3 class="text-2xl font-bold accent-text">Basic</h3>
                    <p class="text-secondary mt-2 mb-4">Simple, soft, and soulful</p>
                    <div class="mb-6"> <del class="text-2xl text-secondary">৳4,000</del> <p class="text-4xl font-bold">৳3,000</p> </div>
                    <ul class="text-left space-y-3 text-secondary flex-grow">
                        <li class="flex items-start"><i class="fas fa-check-circle accent-text mt-1 mr-3"></i>Single Nasheed Composition</li>
                        <li class="flex items-start"><i class="fas fa-check-circle accent-text mt-1 mr-3"></i>Light Background Humming</li>
                        <li class="flex items-start"><i class="fas fa-check-circle accent-text mt-1 mr-3"></i>Basic Mixing & Mastering</li>
                        <li class="flex items-start"><i class="fas fa-check-circle accent-text mt-1 mr-3"></i>2 Hour Studio Slot</li>
                        <li class="flex items-start"><i class="fas fa-check-circle accent-text mt-1 mr-3"></i>Up to 2 Revisions</li>
                    </ul>
                    <div class="mt-8">
                        <a href="https://www.youtube.com/playlist?list=PLsgYbJA6c0qubijW6DvQcSbpTsk2Ystjh" target="_blank" class="btn btn-secondary w-full mb-3">Show Sample</a>
                        <button class="btn btn-primary w-full order-now-btn" data-package="Basic" data-price="3000" data-duration="2">Order Now</button>
                    </div>
                </div>
                <div class="card flex flex-col border-2 accent-border relative shadow-2xl dark:shadow-blue-500/10">
                    <div class="absolute top-0 -translate-y-1/2 left-1/2 -translate-x-1/2 px-4 py-1 accent-bg text-white rounded-full text-sm font-semibold">Most Popular</div>
                    <h3 class="text-2xl font-bold accent-text">Standard</h3>
                    <p class="text-secondary mt-2 mb-4">Richer sound, solo or group</p>
                    <div class="mb-6"> <del class="text-2xl text-secondary">৳8,000</del> <p class="text-4xl font-bold">৳6,000</p> </div>
                    <ul class="text-left space-y-3 text-secondary flex-grow">
                        <li class="flex items-start"><i class="fas fa-check-circle accent-text mt-1 mr-3"></i>Composition (Solo or Group)</li>
                        <li class="flex items-start"><i class="fas fa-check-circle accent-text mt-1 mr-3"></i>Stronger & Layered Humming</li>
                        <li class="flex items-start"><i class="fas fa-check-circle accent-text mt-1 mr-3"></i>Full Mixing & Mastering</li>
                        <li class="flex items-start"><i class="fas fa-check-circle accent-text mt-1 mr-3"></i>4 Hour Studio Slot</li>
                        <li class="flex items-start"><i class="fas fa-check-circle accent-text mt-1 mr-3"></i>Up to 3 Revisions</li>
                    </ul>
                    <div class="mt-8">
                        <a href="https://www.youtube.com/playlist?list=PLsgYbJA6c0qsIz_Ek50IZ5g2p9GrcN0X5" target="_blank" class="btn btn-secondary w-full mb-3">Show Sample</a>
                        <button class="btn btn-primary w-full order-now-btn" data-package="Standard" data-price="6000" data-duration="4">Order Now</button>
                    </div>
                </div>
                <div class="card flex flex-col">
                    <h3 class="text-2xl font-bold accent-text">Premium</h3>
                    <p class="text-secondary mt-2 mb-4">Studio-grade nasheed</p>
                    <div class="mb-6"> <del class="text-2xl text-secondary">৳15,000</del> <p class="text-4xl font-bold">৳10,000</p> </div>
                    <ul class="text-left space-y-3 text-secondary flex-grow">
                        <li class="flex items-start"><i class="fas fa-check-circle accent-text mt-1 mr-3"></i>Full Vocal Composition</li>
                        <li class="flex items-start"><i class="fas fa-check-circle accent-text mt-1 mr-3"></i>Full Instrument Arrangement</li>
                        <li class="flex items-start"><i class="fas fa-check-circle accent-text mt-1 mr-3"></i>High-End Mixing & Mastering</li>
                        <li class="flex items-start"><i class="fas fa-check-circle accent-text mt-1 mr-3"></i>6 Hour Studio Slot</li>
                        <li class="flex items-start"><i class="fas fa-check-circle accent-text mt-1 mr-3"></i>Up to 5 Revisions</li>
                    </ul>
                     <div class="mt-8">
                        <a href="https://www.youtube.com/playlist?list=PLsgYbJA6c0qs8_ipWonSjU-mndkCRxQNH" target="_blank" class="btn btn-secondary w-full mb-3">Show Sample</a>
                        <button class="btn btn-primary w-full order-now-btn" data-package="Premium" data-price="10000" data-duration="6">Order Now</button>
                    </div>
                </div>
            </div>
        </section>

        <section id="samples" class="my-24 text-center">
            <h2 class="section-title">The Transformation</h2>
            <p class="section-subtitle">Hear the difference professional production makes. We turn raw vocals into polished, soulful masterpieces.</p>
            <div class="space-y-8 max-w-4xl mx-auto">
                <div class="card">
                    <h3 class="text-xl font-bold mb-4">Sample 1: "Soul's Awakening"</h3>
                    <div class="grid md:grid-cols-2 gap-8 items-center">
                        <div>
                            <h4 class="font-semibold mb-2 text-secondary">Before</h4>
                            <audio controls class="w-full">
                                <source src="#" type="audio/mpeg">
                                Your browser does not support the audio element.
                            </audio>
                        </div>
                        <div>
                            <h4 class="font-semibold mb-2 accent-text">After</h4>
                            <audio controls class="w-full">
                                <source src="#" type="audio/mpeg">
                                Your browser does not support the audio element.
                            </audio>
                        </div>
                    </div>
                </div>
                 <div class="card">
                    <h3 class="text-xl font-bold mb-4">Sample 2: "Echoes of Faith"</h3>
                     <div class="grid md:grid-cols-2 gap-8 items-center">
                        <div>
                            <h4 class="font-semibold mb-2 text-secondary">Before</h4>
                            <audio controls class="w-full">
                                <source src="#" type="audio/mpeg">
                                Your browser does not support the audio element.
                            </audio>
                        </div>
                        <div>
                            <h4 class="font-semibold mb-2 accent-text">After</h4>
                            <audio controls class="w-full">
                                <source src="#" type="audio/mpeg">
                                Your browser does not support the audio element.
                            </audio>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="clients" class="my-24 text-center">
            <h2 class="section-title">Our Valuable Clients</h2>
            <p class="section-subtitle">We proudly work with leading Islamic labels and artists who value quality, creativity, and purpose in every nasheed.</p>
            <div class="grid grid-cols-2 md:grid-cols-4 gap-8 mb-16"></div>
            <h3 class="text-2xl font-bold mb-8">Artists We Work With</h3>
            <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-8"></div>
        </section>

        <section id="lyrics-generator" class="my-24 text-center">
            <h2 class="section-title">AI Lyrics Generator</h2>
            <p class="section-subtitle">Need inspiration? Use our AI tool to generate Nasheed lyrics on any topic, in any language. A great starting point for your next masterpiece.</p>
            <div class="card max-w-4xl mx-auto text-left">
                <form id="lyricsForm" class="space-y-6">
                    <div class="grid md:grid-cols-2 gap-6">
                        <div>
                            <label for="lyricsTopic" class="block text-sm font-medium text-secondary mb-2">Topic</label>
                            <input type="text" id="lyricsTopic" placeholder="e.g., Gratitude to Allah" class="lyrics-input" required>
                        </div>
                        <div>
                            <label for="lyricsLanguage" class="block text-sm font-medium text-secondary mb-2">Language</label>
                            <select id="lyricsLanguage" class="lyrics-input">
                                <option>English</option>
                                <option>Bengali (বাংলা)</option>
                                <option>Arabic (العربية)</option>
                                <option>Urdu (اردو)</option>
                                <option>Indonesian (Bahasa Indonesia)</option>
                            </select>
                        </div>
                    </div>
                    <div>
                        <label for="lyricsLines" class="block text-sm font-medium text-secondary mb-2">Number of Lines: <span id="linesCount" class="font-bold accent-text">8</span></label>
                        <input type="range" id="lyricsLines" min="4" max="16" value="8" class="w-full h-2 bg-primary rounded-lg appearance-none cursor-pointer accent-bg">
                    </div>
                    <div class="text-center pt-2">
                        <button type="submit" id="generateLyricsBtn" class="btn btn-primary w-full md:w-auto">
                           <i class="fas fa-robot mr-2"></i> Generate Lyrics
                        </button>
                    </div>
                </form>
                <div class="mt-8">
                    <h4 class="font-semibold mb-4 text-lg">Generated Lyrics:</h4>
                    <div id="lyricsResultContainer">
                        <p class="text-secondary text-center">Your AI-generated lyrics will appear here. <br>Enter a topic and let our AI inspire you!</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="faq" class="my-24 max-w-4xl mx-auto">
            <h2 class="section-title text-center">Frequently Asked Questions</h2>
            <p class="section-subtitle text-center">Find answers to common questions about our services, process, and policies.</p>
            <details>
                <summary>What is a Nasheed and how is it different from other music?</summary>
                <div class="faq-content"> A Nasheed is a form of vocal music, either sung a cappella or with percussion instruments, popular in the Islamic world. The lyrics usually reference Islamic beliefs, history, and religion. It traditionally avoids stringed or wind instruments, focusing on the human voice and drums. </div>
            </details>
            <details>
                <summary>What do I need to provide to get started?</summary>
                <div class="faq-content"> All you need are your lyrics and a basic vocal recording (even from your phone) so we can understand the melody. From there, we handle the entire composition, mixing, and mastering process based on your chosen package. You can even use our AI Lyrics Generator to get started! </div>
            </details>
            <details>
                <summary>Can I request revisions to the final track?</summary>
                <div class="faq-content"> Yes! Each package comes with a specific number of revisions. We work collaboratively to ensure you are completely satisfied. The Basic package includes 2 revisions, Standard includes 3, and Premium includes 5. </div>
            </details>
             <details>
                <summary>What are your studio's operating hours and off-days?</summary>
                <div class="faq-content"> Our studio is open from 10:00 AM to 10:00 PM. We are closed on Mondays and Wednesdays, as well as major public holidays like Eid. You can see all available slots on our booking calendar. </div>
            </details>
            <details>
                <summary>Is the advance payment refundable?</summary>
                <div class="faq-content"> The advance payment is required to secure your booking slot and is non-refundable. This policy helps us manage our schedule and dedicate the reserved time exclusively to your project. </div>
            </details>
        </section>

        <section id="blog" class="my-24">
            <h2 class="section-title text-center">From The Blog</h2>
            <p class="section-subtitle text-center">Insights, tips, and stories on Nasheed creation and the world of Islamic art.</p>
            <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
                <div class="card flex flex-col">
                    <img src="https://placehold.co/600x400/1E293B/E2E8F0?text=The+Art+of+Humming" class="rounded-lg mb-6 w-full h-48 object-cover">
                    <span class="text-sm accent-text font-semibold mb-2">Composition Tips</span>
                    <h3 class="text-xl font-bold mb-3 flex-grow">The Art of Background Humming in Nasheeds</h3>
                    <p class="text-secondary mb-6">Learn how layered background vocals can add depth, emotion, and a spiritual atmosphere to your track.</p>
                    <a href="#" class="btn btn-secondary mt-auto">Read More</a>
                </div>
                <div class="card flex flex-col">
                    <img src="https://placehold.co/600x400/F0F4F8/0F172A?text=Daf+vs.+Digital" class="rounded-lg mb-6 w-full h-48 object-cover">
                    <span class="text-sm accent-text font-semibold mb-2">Production</span>
                    <h3 class="text-xl font-bold mb-3 flex-grow">Daf vs. Digital Drums: Finding the Right Rhythm</h3>
                    <p class="text-secondary mb-6">Exploring the pros and cons of traditional percussion versus modern digital beats in Nasheed production.</p>
                    <a href="#" class="btn btn-secondary mt-auto">Read More</a>
                </div>
                <div class="card flex flex-col">
                    <img src="https://placehold.co/600x400/1E293B/E2E8F0?text=Lyrical+Inspiration" class="rounded-lg mb-6 w-full h-48 object-cover">
                    <span class="text-sm accent-text font-semibold mb-2">Songwriting</span>
                    <h3 class="text-xl font-bold mb-3 flex-grow">Finding Lyrical Inspiration in Sacred Texts</h3>
                    <p class="text-secondary mb-6">A guide for artists on how to draw inspiration from the Quran and Sunnah to write powerful lyrics.</p>
                    <a href="#" class="btn btn-secondary mt-auto">Read More</a>
                </div>
            </div>
        </section>

        <section id="contact" class="my-24">
            <h2 class="section-title text-center">Get In Touch</h2>
            <p class="section-subtitle text-center">Ready to start your project or have a question? Contact us or visit our studio.</p>
            <div class="card">
                <div class="grid lg:grid-cols-2 gap-12">
                    <div>
                        <h3 class="text-2xl font-bold mb-6">Contact Details</h3>
                        <div class="space-y-6">
                            <div class="flex items-start"><div class="accent-bg text-white rounded-full w-12 h-12 flex items-center justify-center mr-4 flex-shrink-0"><i class="fas fa-envelope text-xl"></i></div><div><h4 class="font-semibold">Email Us</h4><a href="mailto:tanvirstudiots@gmail.com" class="text-secondary hover:accent-text transition">tanvirstudiots@gmail.com</a></div></div>
                            <div class="flex items-start"><div class="accent-bg text-white rounded-full w-12 h-12 flex items-center justify-center mr-4 flex-shrink-0"><i class="fab fa-whatsapp text-xl"></i></div><div><h4 class="font-semibold">Chat on WhatsApp</h4><a href="https://wa.me/8801999454749" target="_blank" class="text-secondary hover:accent-text transition">+880 1999-454749</a></div></div>
                            <div class="flex items-start"><div class="accent-bg text-white rounded-full w-12 h-12 flex items-center justify-center mr-4 flex-shrink-0"><i class="fas fa-map-marker-alt text-xl"></i></div><div><h4 class="font-semibold">Our Location</h4><p class="text-secondary">Yousuf Manjil, Holding No: 328/6,<br>West Shanarpar, Demra, Dhaka-1361</p></div></div>
                        </div>
                    </div>
                    <div class="rounded-lg overflow-hidden border border-color">
                         <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3652.969586173204!2d90.4639720741818!3d23.7088500894569!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3755b76d0b60e683%3A0x1d368b1f3139363a!2sTanvir%20Studio!5e0!3m2!1sen!2sbd!4v1718306012656!5m2!1sen!2sbd"
                          width="100%" height="100%" style="border:0; min-height: 300px;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer class="bg-secondary border-t border-color py-8">
        <div class="container mx-auto px-6 text-center text-secondary">
            <p>© 2025 Tanvir Studio. All Rights Reserved.</p>
        </div>
    </footer>

    <div id="bookingModal" class="fixed inset-0 bg-black/70 flex items-center justify-center p-4 z-50 opacity-0 pointer-events-none">
        <div class="modal-content bg-secondary rounded-2xl shadow-2xl w-full max-w-4xl transform scale-95 transition-transform duration-300 overflow-y-auto">
            <div class="flex justify-between items-center p-6 border-b border-color">
                <h3 class="text-2xl font-bold">Book Your Studio Time</h3>
                <button id="closeModalBtn" class="p-2 rounded-full hover:bg-gray-500/20">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>
            <div class="p-8">
                <div class="flex items-center justify-center mb-8">
                    <div class="step active" data-step="1"><div class="step-circle">1</div><p class="step-label">Schedule</p></div>
                    <div class="step-connector"></div>
                    <div class="step" data-step="2"><div class="step-circle">2</div><p class="step-label">Info</p></div>
                    <div class="step-connector"></div>
                    <div class="step" data-step="3"><div class="step-circle">3</div><p class="step-label">Payment</p></div>
                    <div class="step-connector"></div>
                    <div class="step" data-step="4"><div class="step-circle">4</div><p class="step-label">Confirm</p></div>
                </div>
                <form id="bookingForm">
                    <div class="step-content active" data-step="1">
                        <h4 class="text-xl font-semibold mb-4 text-center">Select Date & Time</h4>
                        <div class="grid md:grid-cols-2 gap-8">
                           <div>
                                <div class="flex justify-between items-center mb-4">
                                    <button type="button" id="prevMonth" class="p-2 rounded-full hover:bg-gray-500/20"><i class="fas fa-chevron-left"></i></button>
                                    <h5 id="monthYear" class="text-lg font-bold"></h5>
                                    <button type="button" id="nextMonth" class="p-2 rounded-full hover:bg-gray-500/20"><i class="fas fa-chevron-right"></i></button>
                                </div>
                                <div class="grid grid-cols-7 gap-2 mb-2 text-center text-secondary text-sm">
                                    <div>Sun</div><div>Mon</div><div>Tue</div><div>Wed</div><div>Thu</div><div>Fri</div><div>Sat</div>
                                </div>
                                <div id="calendar" class="grid grid-cols-7 gap-1"></div>
                           </div>
                           <div id="timeSlotsContainer" class="hidden">
                                <h5 class="font-semibold mb-4 text-center">Available Times</h5>
                                <div id="timeSlots" class="grid grid-cols-2 sm:grid-cols-3 gap-3 max-h-80 overflow-y-auto pr-2"></div>
                           </div>
                        </div>
                         <div class="text-right mt-8">
                            <button type="button" class="btn btn-primary" id="nextStep1" disabled>Next</button>
                        </div>
                    </div>
                    <div class="step-content" data-step="2">
                        <h4 class="text-xl font-semibold mb-4 text-center">Your Information</h4>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div><label for="clientName" class="block text-sm font-medium text-secondary mb-2">Name *</label><input type="text" id="clientName" name="clientName" class="w-full bg-primary border border-color rounded-md p-3" required></div>
                            <div><label for="clientPhone" class="block text-sm font-medium text-secondary mb-2">Phone Number *</label><input type="tel" id="clientPhone" name="clientPhone" class="w-full bg-primary border border-color rounded-md p-3" required></div>
                            <div><label for="selectedPackage" class="block text-sm font-medium text-secondary mb-2">Selected Package</label><input type="text" id="selectedPackage" name="selectedPackage" class="w-full bg-primary border border-color rounded-md p-3" readonly></div>
                            <div><label for="clientEmail" class="block text-sm font-medium text-secondary mb-2">Email Address</label><input type="email" id="clientEmail" name="clientEmail" class="w-full bg-primary border border-color rounded-md p-3"></div>
                        </div>
                         <div class="flex justify-between mt-8">
                            <button type="button" class="btn btn-secondary prev-step">Back</button>
                            <button type="button" class="btn btn-primary next-step">Next</button>
                        </div>
                    </div>
                    <div class="step-content" data-step="3">
                        <h4 class="text-xl font-semibold mb-2 text-center">Advance Payment</h4>
                        <p class="text-secondary mb-6 text-center">A minimum advance of ৳1,000 is required to reserve your booking.</p>
                         <div class="max-w-md mx-auto">
                            <div class="bg-primary border border-color rounded-lg p-4 text-center">
                                <p class="font-semibold">Please "Send Money" to:</p>
                                <p class="my-2"><span class="font-bold">bKash/Nagad (Personal):</span><span class="text-lg accent-text font-mono"> 01999454749</span></p>
                            </div>
                            <div class="mt-6">
                                <label for="paymentAmount" class="block text-sm font-medium text-secondary mb-2">Amount (Minimum ৳1,000)</label>
                                <div class="relative"><span class="absolute inset-y-0 left-0 flex items-center pl-3 text-secondary">৳</span><input type="number" id="paymentAmount" name="paymentAmount" value="1000" min="1000" class="w-full bg-primary border border-color rounded-md p-3 pl-8"></div>
                            </div>
                            <div class="mt-6">
                                <label for="transactionId" class="block text-sm font-medium text-secondary mb-2">Your bKash/Nagad Number's Last 4 Digits *</label>
                                <input type="text" id="transactionId" name="transactionId" class="w-full bg-primary border border-color rounded-md p-3" placeholder="e.g., 1234" maxlength="4" required>
                            </div>
                            <div class="mt-6 flex items-start">
                                <input type="checkbox" id="terms" name="terms" class="mt-1 accent-color h-4 w-4 shrink-0"><label for="terms" class="ml-3 text-sm text-secondary">I agree to the terms and understand that this advance payment is non-refundable.</label>
                            </div>
                        </div>
                         <div class="flex justify-between mt-8">
                            <button type="button" class="btn btn-secondary prev-step">Back</button>
                            <button type="submit" class="btn btn-primary" id="confirmBookingBtn" disabled>Submit for Approval</button>
                        </div>
                    </div>
                    <div class="step-content text-center" data-step="4">
                        <div class="w-24 h-24 bg-yellow-500 rounded-full flex items-center justify-center mx-auto mb-6"><i class="fas fa-hourglass-half text-5xl text-white"></i></div>
                        <h4 class="text-2xl font-bold mb-3">Booking Submitted!</h4>
                        <p class="text-secondary mb-6">Your request is pending approval. We will confirm your booking via phone or email after verifying your payment.</p>
                        <div id="bookingSummary" class="text-left bg-primary p-6 rounded-lg border border-color max-w-md mx-auto"></div>
                        <div class="mt-8">
                            <button type="button" id="closeModalFinalBtn" class="btn btn-primary">Close</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
    
    <script>
    document.addEventListener('DOMContentLoaded', () => {
        // Assume your Node.js backend is running on this URL
        const BACKEND_API_URL = 'http://localhost:3000/api'; // Change if your backend is on a different port/domain

        // --- THEME TOGGLE SCRIPT ---
        const themeToggle = document.getElementById('theme-toggle');
        const themeIcon = document.getElementById('theme-icon');
        const htmlEl = document.documentElement;
        const savedTheme = localStorage.getItem('theme') || 'light';
        htmlEl.classList.toggle('dark', savedTheme === 'dark');
        themeIcon.classList.toggle('fa-sun', savedTheme === 'dark');
        themeIcon.classList.toggle('fa-moon', savedTheme === 'light');

        themeToggle.addEventListener('click', () => {
            const isDark = htmlEl.classList.toggle('dark');
            localStorage.setItem('theme', isDark ? 'dark' : 'light');
            themeIcon.classList.toggle('fa-sun', isDark);
            themeIcon.classList.toggle('fa-moon', !isDark);
        });

        // --- MOBILE MENU SCRIPT ---
        const mobileMenuButton = document.getElementById('mobile-menu-button');
        const mobileMenu = document.getElementById('mobile-menu');
        mobileMenuButton.addEventListener('click', () => {
             mobileMenu.style.display = mobileMenu.style.display === 'block' ? 'none' : 'block';
        });

        // --- DYNAMIC CONTENT INJECTION (Clients & Artists) ---
        const injectContent = () => {
            const clients = [
                { name: 'HolyTune', fileName: 'holy-tune.png', link: 'https://youtube.com/playlist?list=PLsgYbJA6c0qu_7S2_atzStK9s2PmFNUZY&si=aOW83wABHZ2v_bfq' },
                { name: 'Tarana', fileName: 'tarana.png', link: 'https://youtube.com/playlist?list=PLsgYbJA6c0qvv0eS8x3P1-Ara9YRnjAcM&si=5E4_YXTIx_RqYU8r' },
                { name: 'Tune Hut', fileName: 'tune-hut.png', link: 'https://youtube.com/playlist?list=PLsgYbJA6c0quf2ovKA3Xs2pxFH6ETQXZy&si=nsh-f15ssHvtQXty' },
                { name: 'Ador Islamic TV', fileName: 'ador-islamic-tv.png', link: 'https://youtube.com/playlist?list=PLsgYbJA6c0qszq50BaeApyouwzDJyTjcj&si=pO-iys1AkLiYBO06' }
            ];
            const artists = [
                { name: 'Abu Rayhan', fileName: 'abu-rayhan.png' }, 
                { name: 'Abu Ubayda', fileName: 'abu-ubayda.png' },
                { name: 'Qari Abu Rayhan', fileName: 'qari-abu-rayhan.png' }, 
                { name: 'Jubayer Ahmad Tasrif', fileName: 'jubayer-ahmad-tasrif.png' },
                { name: 'Munaem Billah', fileName: 'munaem-billah.png' }, 
                { name: 'Tawhid Jamil', fileName: 'tawhid-jamil.png' },
                { name: 'Hossain Adnan', fileName: 'hossain-adnan.png' }, 
                { name: 'Mahmud Faysal', fileName: 'mahmud-faysal.png' },
                { name: 'Humayra Afrin Era', fileName: 'humayra-afrin-era.png' }, 
                { name: 'Nusrat Zerin', fileName: 'nusrat-zerin.png' }
            ];
            
            const clientsContainer = document.querySelector('#clients .grid:first-of-type');
            const artistsContainer = document.querySelector('#clients .grid:last-of-type');
            
            clientsContainer.innerHTML = clients.map(client => `
                <div class="client-card">
                    <img src="./images/clients/${client.fileName}" alt="${client.name} Logo" class="w-32 h-32 rounded-full mx-auto mb-4 border-4 border-color object-cover">
                    <h4 class="font-bold text-lg mb-4">${client.name}</h4>
                    <a href="${client.link}" target="_blank" class="btn btn-secondary w-full">View Work</a>
                </div>
            `).join('');
            
            artistsContainer.innerHTML = artists.map(artist => `
                <div class="text-center group">
                    <img src="./images/artists/${artist.fileName}" alt="${artist.name}" class="w-32 h-32 rounded-full mx-auto mb-4 border-4 border-color group-hover:accent-border transition object-cover">
                    <h4 class="font-bold mb-2">${artist.name}</h4>
                    <a href="https://www.youtube.com" target="_blank" class="text-sm accent-text font-semibold">View Work</a>
                </div>
            `).join('');
        };
        injectContent();

        // --- BOOKING MODAL SCRIPT ---
        const bookingModal = document.getElementById('bookingModal');
        const modalContent = bookingModal.querySelector('.modal-content');
        const openModalBtns = document.querySelectorAll('.order-now-btn');
        const closeModalBtns = document.querySelectorAll('#closeModalBtn, #closeModalFinalBtn');
        const selectedPackageInput = document.getElementById('selectedPackage');
        const paymentAmountInput = document.getElementById('paymentAmount');
        let packageDuration = 0;

        function openModal() {
            bookingModal.classList.remove('opacity-0', 'pointer-events-none');
            modalContent.classList.remove('scale-95');
        }

        function closeModal() {
            modalContent.classList.add('scale-95');
            bookingModal.classList.add('opacity-0');
            setTimeout(() => {
                 bookingModal.classList.add('pointer-events-none');
                 resetModal();
            }, 300);
        }

        openModalBtns.forEach(btn => {
            btn.addEventListener('click', (e) => {
                const packageData = e.target.dataset;
                selectedPackageInput.value = packageData.package;
                packageDuration = parseInt(packageData.duration, 10);
                // paymentAmountInput.max = packageData.price; // Not used as min is 1000 for advance
                openModal();
            });
        });
        closeModalBtns.forEach(btn => btn.addEventListener('click', closeModal));

        const bookingForm = document.getElementById('bookingForm');
        const steps = Array.from(document.querySelectorAll('.step'));
        const stepContents = Array.from(document.querySelectorAll('.step-content'));
        const nextStepButtons = document.querySelectorAll('.next-step, #nextStep1');
        const prevStepButtons = document.querySelectorAll('.prev-step');
        let currentStep = 1;

        function goToStep(stepNumber) {
            currentStep = stepNumber;
            steps.forEach((step, index) => {
                step.classList.toggle('active', index < stepNumber);
            });
            stepContents.forEach(content => {
                content.classList.toggle('active', parseInt(content.dataset.step) === stepNumber);
            });
        }
        
        nextStepButtons.forEach(button => {
            button.addEventListener('click', () => { 
                if (currentStep === 1 && (!selectedDate || !selectedTime)) {
                    alert('Please select both a date and a time slot.');
                    return;
                }
                if (currentStep < 4) goToStep(currentStep + 1); 
            });
        });
        
        prevStepButtons.forEach(button => {
            button.addEventListener('click', () => { if (currentStep > 1) goToStep(currentStep - 1); });
        });
        
        bookingForm.addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const submitBtn = document.getElementById('confirmBookingBtn');
            submitBtn.disabled = true;
            submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i> Submitting...';

            const formData = {
                clientName: document.getElementById('clientName').value,
                clientPhone: document.getElementById('clientPhone').value,
                clientEmail: document.getElementById('clientEmail').value,
                selectedPackage: document.getElementById('selectedPackage').value,
                bookingDate: selectedDate, // ISO string
                timeSlot: selectedTime,
                paymentAmount: parseFloat(document.getElementById('paymentAmount').value),
                transactionIdLast4: document.getElementById('transactionId').value,
                termsAgreed: document.getElementById('terms').checked,
            };

            try {
                const response = await fetch(`${BACKEND_API_URL}/bookings`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(formData),
                });

                const result = await response.json();

                if (response.ok) {
                    const summaryDiv = document.getElementById('bookingSummary');
                    summaryDiv.innerHTML = `
                        <p class="mb-2"><strong>Package:</strong> ${formData.selectedPackage}</p>
                        <p class="mb-2"><strong>Name:</strong> ${formData.clientName}</p>
                        <p class="mb-2"><strong>Date:</strong> ${new Date(formData.bookingDate).toDateString()}</p>
                        <p class="mb-2"><strong>Time Slot:</strong> ${formData.timeSlot}</p>
                        <p class="mb-2"><strong>Amount Paid:</strong> ৳${formData.paymentAmount.toLocaleString()}</p>
                        <p><strong>bKash/Nagad Last 4 Digits:</strong> ${formData.transactionIdLast4}</p>
                    `;
                    goToStep(4); // Move to the confirmation step
                } else {
                    alert(result.message || 'Booking failed. Please try again.');
                }
            }
            // Add a specific catch for network errors
            catch (error) {
                console.error('Error submitting booking:', error);
                // Check if it's a network error
                if (error instanceof TypeError && error.message === 'Failed to fetch') {
                    alert('Network error: Could not connect to the server. Please check your internet connection or try again later.');
                } else {
                    alert('An unexpected error occurred during booking. Please try again.');
                }
            } finally {
                submitBtn.disabled = false;
                submitBtn.innerHTML = 'Submit for Approval';
            }
        });

        const monthYearEl = document.getElementById('monthYear');
        const calendarEl = document.getElementById('calendar');
        const prevMonthBtn = document.getElementById('prevMonth');
        const nextMonthBtn = document.getElementById('nextMonth');
        const timeSlotsContainer = document.getElementById('timeSlotsContainer');
        const timeSlotsEl = document.getElementById('timeSlots');
        const nextStep1Btn = document.getElementById('nextStep1');
        
        let currentDate = new Date();
        let selectedDate = null;
        let selectedTime = null;
        
        // Fetch unavailable days and booked slots from backend
        let unavailableDays = [1, 3]; // Example: Monday (1), Wednesday (3) are unavailable
        let unavailableDates = []; // Example: ['2025-06-16', '2025-06-17']
        let bookedSlots = []; // Example: ['2025-07-25-14', '2025-07-26-10'] (Date-Hour format)

        async function fetchBookingAvailability() {
            try {
                // Fetch unavailable days, specific dates, and booked slots from your backend
                const response = await fetch(`${BACKEND_API_URL}/availability`);
                if (response.ok) {
                    const data = await response.json();
                    unavailableDays = data.unavailableDays || unavailableDays;
                    unavailableDates = data.unavailableDates || unavailableDates;
                    bookedSlots = data.bookedSlots || bookedSlots;
                } else {
                    console.warn('Failed to fetch booking availability from backend, using defaults.');
                    // Optionally, alert the user about default data being used
                    // alert('Could not load real-time availability. Showing default availability.');
                }
            } catch (error) {
                console.error('Error fetching booking availability:', error);
                // Optionally, alert the user about network issues
                // alert('Network error: Could not fetch real-time availability.');
            } finally {
                renderCalendar();
                renderTimeSlots();
            }
        }

        function renderCalendar() {
            calendarEl.innerHTML = '';
            const month = currentDate.getMonth();
            const year = currentDate.getFullYear();
            monthYearEl.textContent = `${currentDate.toLocaleString('default', { month: 'long' })} ${year}`;
            const firstDayOfMonth = new Date(year, month, 1).getDay();
            const daysInMonth = new Date(year, month + 1, 0).getDate();
            for (let i = 0; i < firstDayOfMonth; i++) calendarEl.insertAdjacentHTML('beforeend', '<div></div>');
            for (let day = 1; day <= daysInMonth; day++) {
                const date = new Date(year, month, day);
                const dateString = `${year}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
                const isPast = date < new Date(new Date().setHours(0, 0, 0, 0));
                const isUnavailable = unavailableDays.includes(date.getDay()) || unavailableDates.includes(dateString) || isPast;
                const dayEl = document.createElement('div');
                dayEl.textContent = day;
                dayEl.classList.add('calendar-day');
                if (isUnavailable) dayEl.classList.add('disabled');
                else dayEl.dataset.date = date.toISOString();
                if (selectedDate && date.toDateString() === new Date(selectedDate).toDateString()) dayEl.classList.add('selected');
                if (date.toDateString() === new Date().toDateString()) dayEl.classList.add('today');
                calendarEl.appendChild(dayEl);
            }
        }

        calendarEl.addEventListener('click', e => {
            if (e.target.classList.contains('calendar-day') && !e.target.classList.contains('disabled')) {
                document.querySelectorAll('.calendar-day.selected').forEach(d => d.classList.remove('selected'));
                e.target.classList.add('selected');
                selectedDate = e.target.dataset.date;
                selectedTime = null; // Reset time selection on new date
                renderTimeSlots();
                updateNextButtonState();
            }
        });

        function renderTimeSlots() {
            if (!selectedDate || !packageDuration) {
                timeSlotsContainer.style.display = 'none';
                return;
            }
            timeSlotsEl.innerHTML = '';
            timeSlotsContainer.style.display = 'block';
            const startTime = 10; // Studio opens at 10 AM
            const endTime = 22;   // Studio closes at 10 PM (22:00)

            const datePrefix = new Date(selectedDate).toISOString().split('T')[0];

            for (let hour = startTime; hour < endTime; hour++) {
                const slotEndHour = hour + packageDuration;
                if (slotEndHour > endTime) continue; // Skip if package extends beyond closing time

                const startHourFormatted = `${String(hour).padStart(2,'0')}:00`;
                const endHourFormatted = `${String(slotEndHour).padStart(2, '0')}:00`;
                const timeString = `${startHourFormatted} - ${endHourFormatted}`;
                
                let isBooked = false;
                for(let i=0; i < packageDuration; i++) {
                    const slotIdentifier = `${datePrefix}-${String(hour+i).padStart(2,'0')}`;
                    if(bookedSlots.includes(slotIdentifier)) { // Check if any hour within the slot is booked
                        isBooked = true;
                        break;
                    }
                }
                
                const timeEl = document.createElement('div');
                timeEl.textContent = timeString;
                timeEl.classList.add('p-3', 'rounded-md', 'text-center', 'time-slot');
                if(isBooked) {
                    timeEl.classList.add('disabled');
                    timeEl.textContent += ' (Booked)';
                } else {
                    timeEl.dataset.time = timeString;
                }
                timeSlotsEl.appendChild(timeEl);
            }
        }

        timeSlotsEl.addEventListener('click', e => {
            if (e.target.classList.contains('time-slot') && !e.target.classList.contains('disabled')) {
                document.querySelectorAll('.time-slot.selected').forEach(t => t.classList.remove('selected'));
                e.target.classList.add('selected');
                selectedTime = e.target.dataset.time;
                updateNextButtonState();
            }
        });

        prevMonthBtn.addEventListener('click', () => { 
            currentDate.setMonth(currentDate.getMonth() - 1); 
            fetchBookingAvailability(); // Re-fetch availability for new month
        });
        nextMonthBtn.addEventListener('click', () => { 
            currentDate.setMonth(currentDate.getMonth() + 1); 
            fetchBookingAvailability(); // Re-fetch availability for new month
        });
        function updateNextButtonState() { nextStep1Btn.disabled = !(selectedDate && selectedTime); }

        const termsCheckbox = document.getElementById('terms');
        const transactionIdInput = document.getElementById('transactionId');
        const confirmBookingBtn = document.getElementById('confirmBookingBtn');
        function checkConfirmButtonState() { confirmBookingBtn.disabled = !termsCheckbox.checked || transactionIdInput.value.length < 4; }
        termsCheckbox.addEventListener('change', checkConfirmButtonState);
        transactionIdInput.addEventListener('input', checkConfirmButtonState);

        function resetModal() {
             bookingForm.reset();
             goToStep(1);
             selectedDate = null; selectedTime = null; packageDuration = 0;
             timeSlotsContainer.style.display = 'none';
             renderCalendar(); // Re-render calendar to clear selections
             confirmBookingBtn.disabled = true;
             termsCheckbox.checked = false;
             // Reset selected class on calendar days and time slots
             document.querySelectorAll('.calendar-day.selected').forEach(d => d.classList.remove('selected'));
             document.querySelectorAll('.time-slot.selected').forEach(t => t.classList.remove('selected'));
        }

        fetchBookingAvailability(); // Initial fetch
        
        // --- AI LYRICS GENERATOR SCRIPT (using Node.js backend proxy for Gemini API) ---
        const lyricsForm = document.getElementById('lyricsForm');
        const lyricsLinesSlider = document.getElementById('lyricsLines');
        const linesCount = document.getElementById('linesCount');
        const resultContainer = document.getElementById('lyricsResultContainer');
        const generateBtn = document.getElementById('generateLyricsBtn');

        lyricsLinesSlider.addEventListener('input', () => {
            linesCount.textContent = lyricsLinesSlider.value;
        });

        lyricsForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            const topic = document.getElementById('lyricsTopic').value;
            const language = document.getElementById('lyricsLanguage').value;
            const lines = lyricsLinesSlider.value;
            
            // --- Set Loading State ---
            generateBtn.disabled = true;
            generateBtn.innerHTML = '<i class="fas fa-circle-notch fa-spin mr-2"></i> Generating...';
            resultContainer.classList.add('generating');
            resultContainer.innerHTML = `<p class="text-secondary text-center">AI is crafting lyrics about "${topic}"...<br>This may take a moment.</p>`;

            // --- Call your Node.js backend for AI Lyrics ---
            try {
                const response = await fetch(`${BACKEND_API_URL}/generate-lyrics`, { // Your backend endpoint
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ topic, language, lines })
                });

                if (!response.ok) {
                    throw new Error(`Backend Error: ${response.status} ${response.statusText}`);
                }

                const result = await response.json();
                
                // --- Process and Display the Result ---
                let generatedText = "Sorry, the AI couldn't generate lyrics for this topic. Please try another one.";
                if (result.lyrics) { // Assuming your backend sends back { lyrics: "..." }
                     generatedText = result.lyrics;
                }
                
                displayLyrics(generatedText);

            } catch (error) {
                console.error("Error generating lyrics:", error);
                const errorMessage = "An error occurred while generating lyrics. Please check your connection and try again. (Backend may not be running)";
                displayLyrics(errorMessage, true);
            } finally {
                // --- Reset UI after completion or error ---
                generateBtn.disabled = false;
                generateBtn.innerHTML = '<i class="fas fa-robot mr-2"></i> Generate Again';
                resultContainer.classList.remove('generating');
            }
        });

        // --- Helper function to display lyrics and the copy button ---
        function displayLyrics(lyrics, isError = false) {
            resultContainer.innerHTML = ''; // Clear loading text
            resultContainer.style.alignItems = 'flex-start'; // Align text to the top
            
            const textNode = document.createElement('p');
            textNode.textContent = lyrics;
            if(isError) textNode.classList.add('text-red-500');
            resultContainer.appendChild(textNode);

            if (!isError) {
                const copyBtn = document.createElement('button');
                copyBtn.innerHTML = '<i class="far fa-copy"></i><span class="ml-2">Copy</span>';
                copyBtn.className = 'copy-btn';
                copyBtn.title = 'Copy lyrics to clipboard';

                copyBtn.addEventListener('click', () => {
                    const textArea = document.createElement('textarea');
                    textArea.value = lyrics;
                    document.body.appendChild(textArea);
                    textArea.select();
                    try {
                        document.execCommand('copy'); // Use execCommand for broader compatibility
                        copyBtn.innerHTML = '<i class="fas fa-check"></i><span class="ml-2">Copied!</span>';
                    } catch (err) {
                        copyBtn.innerHTML = '<i class="fas fa-times"></i><span class="ml-2">Failed</span>';
                        console.error('Failed to copy text: ', err);
                    }
                    document.body.removeChild(textArea);
                    
                    setTimeout(() => {
                         copyBtn.innerHTML = '<i class="far fa-copy"></i><span class="ml-2">Copy</span>';
                    }, 2500);
                });
                resultContainer.appendChild(copyBtn);
            }
        }
    });
    </script>
</body>
</html>